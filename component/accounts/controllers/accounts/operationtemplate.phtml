<?php if(in_array(strtolower($action),array('create','update'))):?>	<!-- box / left -->	<form action="<?php echo $this->baseUrl("/accounts/operationtemplate"); ?>" id="saveform" method="post">	<input type="hidden" value="<?php echo App::Html()->selectDefaultValue($template,'id'); ?>" name="data[AccOptTemplate][id]" />	<div class="box box-left box-padding box-left-tabs">		<!-- box / title -->		<div class="title">			<h5>			<?php echo $this->__('Create Template');?></h5>		</div>				<!-- end box / title -->		<div id="box-left-forms">			<div class="form">				<div class="fields">					<div class="field first">						<div class="label">							<label for="name"><?php echo $this->__('Name:');?></label>						</div>						<div class="input">							<input type="text" id="name" value="<?php echo App::Html()->selectDefaultValue($template,'name'); ?>" name="data[AccOptTemplate][name]" class="large check_notempty"/>						</div>					</div>					<div class="field">						<div class="label">							<label><?php echo $this->__('Code/Purpose');?></label>						</div>						<div class="input">							<?php echo App::Component('Accounts')->Helper('Data')->getEntryCodeListTag('data[AccOptTemplate][code]',App::Html()->selectDefaultValue($template,'code'),array('class'=>'select-entry-code'));?>						</div>					</div> 					<div class="field">						<div class="label">							<label><?php echo $this->__('Group');?></label>						</div>						<div class="input">							<?php echo App::CategorySet('accopttemplategrp')->Tag('data[AccOptTemplate][groupid]',App::Html()->selectDefaultValue($template,'groupid'),array('inputType'=>'checkboxTag')); ?>						</div>					</div>					<div class="field">						<div class="label">							<label for="name"><?php echo $this->__('Remark:');?></label>						</div>						<div class="input">							<input type="text" id="name" value="<?php echo App::Html()->selectDefaultValue($template,'shortremark');?>" name="data[AccOptTemplate][shortremark]" class="small check_notempty"/>							<input type="text" id="name" value="<?php echo App::Html()->selectDefaultValue($template,'fullremark');?>" name="data[AccOptTemplate][fullremark]" class="small"/>						</div>					</div>					<div class="field">						<div class="message"></div>					</div>					<div class="buttons">											<input type="submit" name="submit" value="SAVE"/>					</div>				</div>			</div>		</div>	</div>	<div class="box box-right">		<div class="title">			<h5>				<?php echo $this->__("Select Group Name");?></h5>		</div>		<div class="form">						<div class="fields">				<div class="fields">					<div class="field first">						<div class="label">							<label><?php echo $this->__('Debit Account');?></label>						</div>						<div class="input">							<?php echo App::Component('Accounts')->Helper('Data')->setReturnAccountNo(true)->AccountListTag('data[AccOptTemplate][debitaccount]',App::Html()->selectDefaultValue($template,'debitaccount')); ?>							<?php echo App::Html()->checkboxTag("data[AccOptTemplate][debitautoselection]",array("1"=>"Auto Selection"),App::Html()->selectDefaultValue($template,'debitautoselection'));?>						</div>					</div> 										<div class="field">						<div class="label">							<label><?php echo $this->__('Credit Account');?></label>						</div>						<div class="input">							<?php echo App::Component('Accounts')->Helper('Data')->AccountListTag('data[AccOptTemplate][creditaccount]',App::Html()->selectDefaultValue($template,'creditaccount')); ?>							<?php echo App::Html()->checkboxTag("data[AccOptTemplate][creditautoselection]",array("1"=>"Auto Selection"),App::Html()->selectDefaultValue($template,'creditautoselection'));?>							</div>					</div>					<div class="field">						<div class="label">							<label><?php echo $this->__('Transaction Method');?></label>						</div>						<div class="input">							<?php echo App::Html()->selectTag('data[AccOptTemplate][method]',array('Flat'=>'Flat Amount','Percentage'=>'Percentage of Amount'),App::Html()->selectDefaultValue($template,'method','Percentage'),array(),array('off_blank'=>'Yes')) ?>						</div>					</div>					<div class="field">						<div class="label">							<label><?php echo $this->__('Value');?></label>						</div>						<div class="input">							<?php echo App::Html()->inputTag('data[AccOptTemplate][value]',App::Html()->selectDefaultValue($template,'value','100'),array('class'=>'small')) ?>						</div>					</div>				</div>							</div>		</div>	</div>	</form>	<?php  App::Helper('JavaScript')->setValidation(array('errorMark'=>'background'))->setAjax(array("debug" => false, "autoHide" => false))->appForm('#saveform');?><?php else:?>	<?php App::Helper('Toolbar')->setTitle("Template List")->setBtnBack()->Render(array('code'=>'toolbar_top')); ?>		<?php $list = App::Component('Accounts')->Helper('Data')->templates();?>		<?php 			if(!empty($list['data'])){						$DataGrid = App::Module('DataGrid') 					->clear()					->setHeader(array('ID','Group','Name','Purpose/Code','Short Remark','OPERATION'))					->setFooter($list['paging_str']);									foreach($list['data'] as $row){					$DataGrid->addRow(						$row['id'], 						App::CategorySet()->idToName($row['groupid']), 						$row['name'], 						$row['code'], 						$row['shortremark'],						App::load("Helper/Html")->linkTag($this->baseurl('/accounts/operationtemplate/update/' . $row['id']),App::load("Helper/Html")->imgTag($this->baseurl('/images/admin/edit.gif'),NULL,array('title'=>'Edit ','alt' => 'Edit',"class"=>"icon")),array("title"=>"Edit Template"))					  . App::load("Helper/Html")->linkTag("javascript:void(0)",App::load("Helper/Html")->imgTag($this->baseurl('/images/admin/remove.gif'),NULL,array('title'=>'Delete','alt'=>'Delete')),array('class'=>'link_delete icon', 'title'=>'AccOptTemplate_' . $row['id']))					);				}					$DataGrid->Render();				}			else			{				echo $this->callElement('default/tools/message', array('caption' =>'Message','type' => 'message', 'message' => $this->__('No data found')));			}		?>		<?php App::Helper('Toolbar')->setBtnBack()->Render(array('code'=>'toolbar_bottom')); ?><?php endif;?>