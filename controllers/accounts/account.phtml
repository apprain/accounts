<?php if($entrytype == 'View'):?>	<?php 		## TOP TOOL BAR		App::Helper('Toolbar')->setTitle("{$CurrentAccount['name']} ({$CurrentAccount['no']})")				->setBtnCustomHTML('<input type="button" class="docrdr" value="Credit" title="Credit" /> <input type="button" class="docrdr" value="Debit" title="Debit" /> <input type="button" class="printstatement" value="Print Statement" title="Debit" />')			->setBtnBack()->Render(array('code'=>'accounts_index_top')); 	?>		<div id="txnbox">		    <!-- RENDER THE GRID -->		<?php App::Component('Accounts')->Helper('Ui')->RenderEntries($CurrentAccount);	?>	</div>			<?php 		## BOTTOM TOOL BAR		App::Helper('Toolbar')			->setBtnBack()			->setBtnCustomHTML(				'<input type="button" class="docrdr" value="Credit" title="Credit" /> 				<input type="button" class="docrdr" value="Debit" title="Debit" /> 				<input type="button" class="printstatement" value="Print Statement" title="Print Statement" /> 				<input type="button" class="deletefindoc" value="Delete" title="Delete" />'			)			->Render(array('code'=>'account_bottom')); 	?>	<!-- PRING BOX -->		<div id="print-statement" style="display:none;overflow:none">						<input type="text" id="srcfdate" style="width:80px" class="small date" value="<?php echo date('Y-m-d'); ?>" /> To			<input type="text" id="srctdate" style="width:80px" class="small date" value="<?php echo date('Y-m-d'); ?>" />							<?php echo App::Html()->selectTag('mode',array('statement'=>'Statement','paymentinvoice'=>'Payment Invoice'),'statement',array("id"=>"printmode"),array('off_blank'=>'Yes')); ?>			<input type="button" id="generatestatement" class="button" value="GENERATE" />		<div id="print-statement-inner" style="border-top:1px solid #EEE;margin-top:10px"></div>			<iframe id="printframe" src="<?php echo App::Config()->baseUrl("/accounts/printstatement/{$CurrentAccount['no']}?"); ?>" width="100%" height="375"></iframe>		</div>	</div>							<script type="text/javascript">			var id = <?php echo $id;?>;		var lid = null;		jQuery(document).ready(function (){					jQuery("#print-statement").dialog({				autoOpen: false,				width:850,				height:500,				title:"Print Statement",				resizable: false,				modal: true,				buttons: {					Close: function () {						jQuery(this).dialog('close');					},					"Print Statement": function () {						var vSrc = jQuery('#printframe').attr('src');						jQuery('#printframe').attr('src',vSrc + ((vSrc.search("print=yes")<0) ? '&print=yes' : ''));					}								}			});						jQuery(".printstatement").click(function(event) {				jQuery("#print-statement").dialog("open");				return false;			});						jQuery(".deletefindoc").click(function(event) {				alert(1);				return false;			});									jQuery(".docrdr").click(function(event) {				var linkURI = siteInfo.baseUrl + '/accounts/account/' + id +  '/'+ jQuery(this).val();				if(lid != null){					linkURI += '?tlinked=' + lid;				}				window.location = linkURI;				 			});			jQuery("#txnbox tr").mouseover(function(event) {				jQuery(this).css('background-color','#EEE');				jQuery(this).css('cursor','pointer');			});			jQuery("#txnbox tr").mouseout(function(event) {				var obj = jQuery(this).find('td')[0];				var mlid = jQuery(obj).html();				if( mlid != lid){					jQuery(this).css('background-color','#FFF');				}				//jQuery(this).attr('title','Double click to view');			});			jQuery("#txnbox tr").click(function(event) {				jQuery("#txnbox tr").css('background-color','#FFF');				jQuery(this).css('background-color','#EEE');				var obj = jQuery(this).find('td')[0];				lid = (lid == jQuery(obj).html()) ? null : jQuery(obj).html();								//alert(this);							});			jQuery("#txnbox tr").dblclick(function(event) {			});				jQuery("#generatestatement").click(function(event) {				var url = siteInfo.baseUrl + '<?php echo "/accounts/printstatement/{$CurrentAccount['no']}"; ?>' + '?f=' + jQuery('#srcfdate').val() + '&t=' + jQuery('#srctdate').val() + '&pm=' + jQuery('#printmode').val();				jQuery('#printframe').attr('src',url);			});		});			</script>	<?php else:?>	<form method="POST" action="<?php echo App::Config()->baseUrl("/accounts/account/{$id}");?>" id="account-payment-form">		<?php App::Helper('Toolbar')->setTitle("{$Account['name']}")->setBtnBack()->Render(array('code'=>'account_top')); ?>		<?php			$crdrarr = array('Credit'=>'Debit','Debit'=>'Credit');			$DataGrid = App::Module('DataGrid') 				->clear()				->setDisplay('FormListing')				->addRow("{$crdrarr[$entrytype]} Account",App::Component('Accounts')->Helper('Data')->setAccMethod($Account['method'])->setSkippedId($id)->AccountListTag('data[Accentry][account]','',array('class'=>'check_notempty')))				->Render();		?>		<?php 			$DataGrid = App::Module('DataGrid') 				->clear()				->setHeader(array('Purpose','Comment'));				$DataGrid->addRow( 						App::Component('Accounts')->Helper('Data')->setAccMethod($Account['method'])->getEntryCodeListTag('data[Accentry][code]','',array('class'=>'check_notempty select-entry-code')),					App::Html()->inputTag('data[Accentry][comment]','',array('class'=>"app_input check_notempty"))				);				$DataGrid->Render();			?>			<script type="text/javascript">			jQuery(document).ready(function () {							jQuery(".select-entry-code").change(function(event) {					jQuery('.select-entry-code-qty').remove();					jQuery('.select-entry-code-qty-f').remove();											if(jQuery( ".select-entry-code option:selected" ).attr('inverntory')=='Yes'){						var obj = jQuery('.data-grid tr')[0];						jQuery(obj).append('<th class="select-entry-code-qty">Qty</th>')						var obj = jQuery('.data-grid tr')[1];						jQuery(obj).append('<td class="select-entry-code-qty-f"><input type="text" name="data[Accentry][qty]" class="app_input check_notempty" value=""  /></td>');					}										jQuery('.select-entry-code-fin').remove();					jQuery('.select-entry-code-fin-f').remove();						if(jQuery( ".select-entry-code option:selected" ).attr('financial')=='Yes'){						var obj = jQuery('.data-grid tr')[0];						jQuery(obj).append('<th class="select-entry-code-fin">Amount</th>')						var obj = jQuery('.data-grid tr')[1];						jQuery(obj).append('<td class="select-entry-code-fin-f"><input type="text" name="data[Accentry][amount]" class="app_input check_notempty" value=""  /></td>');					}				});					});											</script>		<?php if(!empty($LinkTxn)):?>			<h3>Linked Entry</h3>				<?php						// Init Grid				$DataGrid = App::Module('DataGrid') 					->clear()					->setHeader(array('ID','Date','Amount','Balance','Corr. Acct','Code'))					->setFooter(isset($Entries['paging_str']) ? $Entries['paging_str'] : '');						// Print Transaction Grid					$balance = 0;				foreach($LinkTxn as $row){								$corspondaccount = $row['debitaccount'];					$corspondaccountname = $row['debitname'];					if($CurrentAccount['no'] == $row['debitaccount']){						$row['amount'] = $row['amount'] * -1;						$corspondaccount = $row['creditaccount'];						$corspondaccountname = $row['creditname'];					}					$balance += $row['amount'];															$DataGrid->addRow(						$row['id'],						$row['businessdate'],						App::Component('Accounts')->Helper('Data')->numberformate($row['amount']),						App::Component('Accounts')->Helper('Data')->numberformate($balance),						App::Html()->getTag('span',array('title'=>$corspondaccount),$corspondaccountname),						$row['code']					);				}							// Display Grid				$DataGrid->Render();				?>				<?php endif;?>			<?php App::Helper('Toolbar')->setBtnBack()->setBtnSave()->Render(array('code'=>'account_bottom')); ?>		<input type="hidden" name="data[Accentry][link]" value="<?php echo $linkentryid;?>" />		<input type="hidden" name="data[Accentry][txntype]" value="<?php echo $entrytype;?>" />	</form>		<?php  App::Helper('JavaScript')->setValidation(array('errorMark'=>'background'))->setAjax(array("debug" => false, "autoHide" => false))->appForm('#account-payment-form');?><?php endif;?>	